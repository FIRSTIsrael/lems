name: Deploy LEMS

on:
  release:
    types: [released]

jobs:
  deploy:
    uses: ./.github/workflows/deploy-reusable.yml
    with:
      environment: production
      image_tag: lems-${{ github.ref_name }}
      digitalocean_endpoint: ${{ vars.DIGITALOCEAN_ENDPOINT }}
      digitalocean_space: ${{ vars.DIGITALOCEAN_SPACE }}
      lems_domain: ${{ vars.LEMS_DOMAIN }}
      scheduler_url: ${{ vars.SCHEDULER_URL }}
      base_url: ${{ vars.BASE_URL }}
      next_public_base_url: ${{ vars.NEXT_PUBLIC_BASE_URL }}
      ws_url: ${{ vars.WS_URL }}
      next_public_ws_url: ${{ vars.NEXT_PUBLIC_WS_URL }}
      recaptcha: ${{ vars.RECAPTCHA }}
    secrets: inherit
