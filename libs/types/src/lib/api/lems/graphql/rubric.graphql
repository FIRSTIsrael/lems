"""
Status of a rubric evaluation
"""
enum RubricStatus {
  "Rubric has not been filled yet"
  empty
  "Rubric is partially filled"
  draft
  "Rubric has been completed"
  completed
  "Rubric is locked and cannot be edited"
  locked
  "Rubric has been approved"
  approved
}

"""
Judging category type
"""
enum JudgingCategory {
  "Innovation Project judging category"
  innovation_project
  "Robot Design judging category"
  robot_design
  "Core Values judging category"
  core_values
}

"""
Feedback section of a rubric
"""
type RubricFeedback {
  "Positive feedback for the team"
  greatJob: String!
  "Areas for improvement"
  thinkAbout: String!
}

"""
A criterion value in the rubric
"""
type RubricValue {
  "Numeric value for the criterion"
  value: Int!
  "Optional notes about this criterion"
  notes: String
}

"""
Data section of a rubric
"""
type RubricData {
  "Awards the team is eligible for"
  awards: JSON
  "Field values for each rubric criterion"
  fields: JSON
  "Feedback for the team"
  feedback: RubricFeedback
}

"""
A rubric evaluation for a team
"""
type Rubric {
  "Unique identifier for the rubric"
  id: String!

  "The team being evaluated"
  team: Team!

  "The judging category this rubric is for"
  category: JudgingCategory!

  "Current status of the rubric"
  status: RubricStatus!

  "Rubric data including scores and feedback"
  data: RubricData
}

"""
Categorized rubrics for a team across all judging categories
"""
type CategorizedRubrics {
  "Innovation Project rubric"
  innovation_project: Rubric
  "Robot Design rubric"
  robot_design: Rubric
  "Core Values rubric"
  core_values: Rubric
}

"""
Response type for rubric value update
"""
type RubricValueUpdated {
  "The ID of the rubric that was updated"
  rubricId: String!
  "The field ID that was updated"
  fieldId: String!
  "The new value for the field"
  value: RubricValue!
}

"""
Response type for rubric status change
"""
type RubricStatusChanged {
  "The ID of the rubric"
  rubricId: String!
  "The new status of the rubric"
  status: RubricStatus!
}

"""
Response type for rubric feedback update
"""
type RubricFeedbackUpdated {
  "The ID of the rubric that was updated"
  rubricId: String!
  "The new feedback data"
  feedback: RubricFeedback!
}

"""
Response type for rubric status update
"""
type RubricStatusUpdated {
  "The ID of the rubric"
  rubricId: String!
  "The new status of the rubric"
  status: RubricStatus!
}

"""
Response type for rubric awards nominations update
"""
type RubricAwardsUpdated {
  "The ID of the rubric that was updated"
  rubricId: String!
  "The award names that the team is nominated for"
  awards: JSON!
}

"""
Response type for rubric reset
"""
type RubricReset {
  "The ID of the rubric that was reset"
  rubricId: String!

  "Whether the rubric was successfully reset"
  reset: Boolean!
}

extend type Mutation {
  """
  Update a single value in a rubric.
  """
  updateRubricValue(
    "The ID of the division containing the rubric"
    divisionId: String!
    "The ID of the rubric to update"
    rubricId: String!
    "The field ID to update"
    fieldId: String!
    "The new value for the field"
    value: Int!
    "Optional notes for the field"
    notes: String
  ): RubricValueUpdated!

  """
  Update feedback in a rubric.
  """
  updateRubricFeedback(
    "The ID of the division containing the rubric"
    divisionId: String!
    "The ID of the rubric to update"
    rubricId: String!
    "Positive feedback for the team"
    greatJob: String!
    "Areas for improvement"
    thinkAbout: String!
  ): RubricFeedbackUpdated!

  """
  Update the status of a rubric.
  """
  updateRubricStatus(
    "The ID of the division containing the rubric"
    divisionId: String!
    "The ID of the rubric to update"
    rubricId: String!
    "The new status for the rubric"
    status: RubricStatus!
  ): RubricStatusUpdated!

  """
  Update award nominations for a rubric.
  """
  updateRubricAwards(
    "The ID of the division containing the rubric"
    divisionId: String!
    "The ID of the rubric to update"
    rubricId: String!
    "The award names the team is nominated for"
    awards: JSON!
  ): RubricAwardsUpdated!

  """
  Reset a rubric to empty state.
  """
  resetRubric(
    "The ID of the division containing the rubric"
    divisionId: String!
    "The ID of the rubric to reset"
    rubricId: String!
  ): RubricReset!
}

"""
Union type for all rubric update events
"""
union RubricUpdatedEvent =
  | RubricValueUpdated
  | RubricFeedbackUpdated
  | RubricStatusUpdated
  | RubricAwardsUpdated
  | RubricReset

extend type Subscription {
  """
  Subscribe to all rubric updates in a division.
  Fires when any field value, notes, feedback, or status are updated in any rubric in the division.
  Returns RubricValueUpdated, RubricFeedbackUpdated, or RubricStatusUpdated.
  """
  rubricUpdated("The division ID to listen for updates in" divisionId: String!): RubricUpdatedEvent!

  """
  Subscribe to rubric status changes in a division.
  Lighter weight than rubricUpdated - only fires when overall rubric status changes.
  Use this if you only care about status transitions and want to reduce subscription overhead.
  """
  rubricStatusChanged(
    "The division ID to listen for updates in"
    divisionId: String!
  ): RubricStatusChanged!
}
